"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[97],{8759:function(e,s,t){t.r(s),t.d(s,{default:function(){return L}});var a=t(3396),o=t(7139),r=t(9242);const n=e=>((0,a.dD)("data-v-2809734a"),e=e(),(0,a.Cn)(),e),l={class:"Profile maxWidthAndCenter"},d=n((()=>(0,a._)("div",{class:"spaceDivider"},null,-1))),i={class:"headerFlex"},u=["src"],p={class:"passwordBox hide",id:"passwordBox"},h={class:"profileBox"},m=n((()=>(0,a._)("h2",null,"User info:",-1))),w=n((()=>(0,a._)("dt",null,"Username:",-1))),c=n((()=>(0,a._)("dt",null,"E-mail:",-1))),g=n((()=>(0,a._)("h2",null,"Change password",-1))),_={key:0,class:"error",id:"error"},P=n((()=>(0,a._)("label",null,"Old password: ",-1))),v=n((()=>(0,a._)("label",null,"New password: ",-1))),I=n((()=>(0,a._)("label",null,"Repeat new password: ",-1))),f=n((()=>(0,a._)("input",{type:"submit",value:"Update password"},null,-1))),y=n((()=>(0,a._)("br",null,null,-1))),b=n((()=>(0,a._)("hr",null,null,-1))),M=n((()=>(0,a._)("h2",null,"My vibbz",-1)));function E(e,s,n,E,C,k){const S=(0,a.up)("Header"),U=(0,a.up)("PostLayout"),x=(0,a.up)("Message");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(S),d,(0,a._)("div",i,[(0,a._)("h1",null,"Hey, "+(0,o.zw)(C.username)+"!",1),(0,a._)("button",{onClick:s[0]||(s[0]=e=>k.editUser())},[(0,a._)("img",{id:"btnImgOne",src:t(2715)(`./${C.settingsIconImg}.png`)},null,8,u)])]),(0,a._)("section",p,[(0,a._)("div",h,[m,(0,a._)("dl",null,[w,(0,a._)("dd",null,(0,o.zw)(C.username),1),c,(0,a._)("dd",null,(0,o.zw)(C.email),1)])]),(0,a._)("div",null,[g,C.errorMessage?((0,a.wg)(),(0,a.iD)("div",_,[(0,a._)("p",null,(0,o.zw)(C.errorMessage),1)])):(0,a.kq)("",!0),(0,a._)("form",{onSubmit:s[4]||(s[4]=(0,r.iM)((e=>k.updatePassword()),["prevent"]))},[P,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=e=>C.oldPassword=e)},null,512),[[r.nr,C.oldPassword]]),v,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=e=>C.newPassword=e)},null,512),[[r.nr,C.newPassword]]),I,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":s[3]||(s[3]=e=>C.repeatPassword=e)},null,512),[[r.nr,C.repeatPassword]]),f],32),y,b])]),(0,a._)("section",null,[M,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(C.postsArr,(e=>((0,a.wg)(),(0,a.j4)(U,{key:e,class:"deleteBtnStyle",postID:e._id,textEl:e.text,usernameEl:e.username,emotionEl:e.emotion,hashtagsEl:e.hashtags,timestampEL:e.timestamp,showDeleteBtn:!0},null,8,["postID","textEl","usernameEl","emotionEl","hashtagsEl","timestampEL"])))),128))]),(0,a.Wm)(x,{theMessage:C.resultMessage,color:C.messageColor,reveal:C.revealStatus},null,8,["theMessage","color","reveal"])])}var C=t(7471),k=t(65),S=t(8810),U=t(6601),x={name:"Profile",components:{Header:C.Z,Footer:k.Z,PostLayout:U.Z,Message:S.Z},data(){return{username:"",email:"",postsArr:{},oldPassword:"",newPassword:"",repeatPassword:"",resultMessage:"",messageColor:"",revealStatus:"none",errorColor:"#f36a6a",settingsIconImg:"iconSettings",errorMessage:""}},methods:{getUserInfo(){const e=sessionStorage.getItem("userID");fetch(`https://radiant-brushlands-91826.herokuapp.com/user/${e}`,{method:"GET"}).then((e=>{e.json().then((e=>{this.username=e.username,this.email=e.email}))})),fetch(`https://radiant-brushlands-91826.herokuapp.com/posts/${e}`,{method:"GET"}).then((e=>{e.json().then((e=>{this.postsArr=e}))}))},getImgUrl(e){var s=t(9861);return s("./"+e+".png")},editUser(){var e=document.getElementById("passwordBox");e.classList.contains("hide")?(this.settingsIconImg="iconClose",e.classList.remove("hide")):(this.settingsIconImg="iconSettings",e.classList.add("hide")),this.oldPassword="",this.newPassword="",this.repeatPassword=""},updatePassword(){const e=sessionStorage.getItem("userID");if(this.newPassword===this.repeatPassword){const s={oldPassword:this.oldPassword,newPassword:this.newPassword};fetch(`https://radiant-brushlands-91826.herokuapp.com/user/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((e=>{e.json().then((s=>{if(e.ok){this.settingsIconImg="iconSettings",this.resultMessage="Password is updated",this.messageColor="#c6ddc4",this.revealStatus="block",setTimeout((()=>{this.resultMessage="",this.messageColor="white",this.revealStatus="none"}),3e3);var t=document.getElementById("passwordBox");t.classList.toggle("hide")}else this.errorMessage=s.message}))}))}else this.errorMessage="New password dont match"}},beforeMount(){this.getUserInfo()}},D=t(89);const B=(0,D.Z)(x,[["render",E],["__scopeId","data-v-2809734a"]]);var L=B}}]);
//# sourceMappingURL=Profile.44a647e8.js.map