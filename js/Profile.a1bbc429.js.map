{"version":3,"file":"js/Profile.a1bbc429.js","mappings":"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","sources":["webpack://app/./src/views/profileView.vue","webpack://app/./src/views/profileView.vue?6ecd"],"sourcesContent":["<template>\r\n  <div class=\"Profile maxWidthAndCenter\">\r\n    <Header />\r\n    <div class=\"spaceDivider\" />\r\n\r\n    <div class=\"headerFlex\">\r\n      <h1>Hey, {{ username }}!</h1>\r\n\r\n      <button @click=\"editUser()\">\r\n        <img\r\n          id=\"btnImgOne\"\r\n          :src=\"require(`../assets/${settingsIconImg}.png`)\"\r\n        />\r\n      </button>\r\n    </div>\r\n\r\n    <section class=\"passwordBox hide\" id=\"passwordBox\">\r\n      <div class=\"profileBox\">\r\n        <h2>User info:</h2>\r\n\r\n        <dl>\r\n          <dt>Username:</dt>\r\n          <dd>{{ username }}</dd>\r\n          <dt>E-mail:</dt>\r\n          <dd>{{ email }}</dd>\r\n        </dl>\r\n      </div>\r\n\r\n      <div>\r\n        <h2>Change password</h2>\r\n        <div class=\"error\" id=\"error\" v-if=\"errorMessage\">\r\n          <p>{{ errorMessage }}</p>\r\n        </div>\r\n        <form @submit.prevent=\"updatePassword()\">\r\n          <label>Old password: </label>\r\n          <input type=\"password\" v-model=\"oldPassword\" />\r\n\r\n          <label>New password: </label>\r\n          <input type=\"password\" v-model=\"newPassword\" />\r\n\r\n          <label>Repeat new password: </label>\r\n          <input type=\"password\" v-model=\"repeatPassword\" />\r\n\r\n          <input type=\"submit\" value=\"Update password\" />\r\n        </form>\r\n        <br />\r\n        <hr />\r\n      </div>\r\n    </section>\r\n\r\n    <section>\r\n      <h2>My vibbz</h2>\r\n      <PostLayout\r\n        v-for=\"post in postsArr\"\r\n        :key=\"post\"\r\n        class=\"deleteBtnStyle\"\r\n        :postID=\"post._id\"\r\n        :textEl=\"post.text\"\r\n        :usernameEl=\"post.username\"\r\n        :emotionEl=\"post.emotion\"\r\n        :hashtagsEl=\"post.hashtags\"\r\n        :timestampEL=\"post.timestamp\"\r\n        :showDeleteBtn=\"true\"\r\n      />\r\n    </section>\r\n\r\n    <Message\r\n      :theMessage=\"resultMessage\"\r\n      :color=\"messageColor\"\r\n      :reveal=\"revealStatus\"\r\n    />\r\n\r\n    <!-- <Footer /> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Header from \"../components/Header.vue\";\r\nimport Footer from \"../components/Footer.vue\";\r\nimport Message from \"../components/Message.vue\";\r\nimport PostLayout from \"../components/PostLayout.vue\";\r\n\r\nexport default {\r\n  name: \"Profile\",\r\n\r\n  //Import components\r\n  components: {\r\n    Header,\r\n    Footer,\r\n    PostLayout,\r\n    Message,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      username: \"\",\r\n      email: \"\",\r\n      postsArr: {},\r\n      oldPassword: \"\",\r\n      newPassword: \"\",\r\n      repeatPassword: \"\",\r\n      resultMessage: \"\",\r\n      messageColor: \"\",\r\n      revealStatus: \"none\",\r\n      errorColor: \"#f36a6a\",\r\n      settingsIconImg: \"iconSettings\",\r\n      errorMessage: \"\",\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    getUserInfo() {\r\n      //Get id from sessionStorage\r\n      const userID = sessionStorage.getItem(\"userID\");\r\n\r\n      //Fetch to get user info\r\n      fetch(`http://localhost:3000/user/${userID}`, {\r\n        method: \"GET\",\r\n      }).then((response) => {\r\n        response.json().then((data) => {\r\n          this.username = data.username;\r\n          this.email = data.email;\r\n        });\r\n      });\r\n\r\n      //Fetch to get uses posts\r\n      fetch(`http://localhost:3000/posts/${userID}`, {\r\n        method: \"GET\",\r\n      }).then((response) => {\r\n        response.json().then((data) => {\r\n          this.postsArr = data;\r\n        });\r\n      });\r\n    },\r\n\r\n    getImgUrl(emotion) {\r\n      var images = require.context(\"../assets/moods\", false, /\\.png$/);\r\n      return images(\"./\" + emotion + \".png\");\r\n    },\r\n\r\n    editUser() {\r\n      var element = document.getElementById(\"passwordBox\");\r\n\r\n      if (element.classList.contains(\"hide\")) {\r\n        this.settingsIconImg = \"iconClose\";\r\n        element.classList.remove(\"hide\");\r\n      } else {\r\n        this.settingsIconImg = \"iconSettings\";\r\n        element.classList.add(\"hide\");\r\n      }\r\n\r\n      this.oldPassword = \"\";\r\n      this.newPassword = \"\";\r\n      this.repeatPassword = \"\";\r\n    },\r\n\r\n    updatePassword() {\r\n      const userID = sessionStorage.getItem(\"userID\");\r\n\r\n      //Check so both new password is same\r\n      if (this.newPassword === this.repeatPassword) {\r\n        //Collect inputs\r\n        const updatePassword = {\r\n          oldPassword: this.oldPassword,\r\n          newPassword: this.newPassword,\r\n        };\r\n\r\n        //Update password\r\n        fetch(`http://localhost:3000/user/${userID}`, {\r\n          method: \"PATCH\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(updatePassword),\r\n        }).then((response) => {\r\n          response.json().then((data) => {\r\n            if (response.ok) {\r\n              //Console checks\r\n              this.settingsIconImg = \"iconSettings\";\r\n\r\n              //Print message out\r\n              this.resultMessage = \"Password is updated\";\r\n              this.messageColor = \"#c6ddc4\";\r\n              this.revealStatus = \"block\";\r\n\r\n              //Remove message after a while\r\n              setTimeout(() => {\r\n                this.resultMessage = \"\";\r\n                this.messageColor = \"white\";\r\n                this.revealStatus = \"none\";\r\n              }, 3000);\r\n\r\n              //Hide box again\r\n              var element = document.getElementById(\"passwordBox\");\r\n              element.classList.toggle(\"hide\");\r\n            } else {\r\n              this.errorMessage = data.message;\r\n            }\r\n          });\r\n        });\r\n      } else {\r\n        this.errorMessage = \"New password dont match\";\r\n      }\r\n    },\r\n  },\r\n\r\n  beforeMount() {\r\n    this.getUserInfo();\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style scoped lang=\"scss\">\r\n.hide {\r\n  display: none;\r\n}\r\n\r\n.profileBox {\r\n  position: relative;\r\n  margin: 3em 0;\r\n  padding-bottom: 2em;\r\n}\r\n\r\n.headerFlex {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n\r\n  h1 {\r\n    margin: 0;\r\n  }\r\n\r\n  button {\r\n    background-color: white;\r\n    border: none;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n      transform: scale(0.9);\r\n    }\r\n\r\n    img {\r\n      width: 35px;\r\n      height: 35px;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\ndt {\r\n    float: left;\r\n    width: 100px;\r\n}\r\n\r\n@media screen and (max-width: 500px) {\r\n\r\n    dt {\r\n        float: left;\r\n        width: 100%;\r\n        font-weight: bold;\r\n    }\r\n\r\n    dd {\r\n        margin-bottom: 1em;\r\n    }\r\n}\r\n\r\n</style>\r\n","import { render } from \"./profileView.vue?vue&type=template&id=877f26b0&scoped=true\"\nimport script from \"./profileView.vue?vue&type=script&lang=js\"\nexport * from \"./profileView.vue?vue&type=script&lang=js\"\n\nimport \"./profileView.vue?vue&type=style&index=0&id=877f26b0&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\E-Hol\\\\Desktop\\\\Miun\\\\ProjectJS\\\\app\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-877f26b0\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","id","type","value","_createElementBlock","_createVNode","_component_Header","_hoisted_2","_toDisplayString","$data","onClick","$options","src","require","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","onSubmit","_hoisted_12","$event","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_Fragment","_renderList","post","_createBlock","_component_PostLayout","key","postID","_id","textEl","text","usernameEl","username","emotionEl","emotion","hashtagsEl","hashtags","timestampEL","timestamp","showDeleteBtn","_component_Message","theMessage","color","reveal","name","components","Header","Footer","PostLayout","Message","data","email","postsArr","oldPassword","newPassword","repeatPassword","resultMessage","messageColor","revealStatus","errorColor","settingsIconImg","errorMessage","methods","getUserInfo","userID","sessionStorage","getItem","fetch","method","then","response","json","this","getImgUrl","images","editUser","element","document","getElementById","classList","contains","remove","add","updatePassword","headers","body","JSON","stringify","ok","setTimeout","toggle","message","beforeMount","__exports__","render"],"sourceRoot":""}