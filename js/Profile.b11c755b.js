"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[97],{6604:function(e,s,t){t.r(s),t.d(s,{default:function(){return z}});var a=t(3396),o=t(7139),r=t(9242);const n=e=>((0,a.dD)("data-v-4a32af84"),e=e(),(0,a.Cn)(),e),l={class:"Profile maxWidthAndCenter"},d=n((()=>(0,a._)("div",{class:"spaceDivider"},null,-1))),i={class:"headerFlex"},u=["src"],p={class:"passwordBox hide",id:"passwordBox"},h={class:"profileBox"},m=n((()=>(0,a._)("h2",null,"User info:",-1))),w=n((()=>(0,a._)("dt",null,"Username:",-1))),c=n((()=>(0,a._)("dt",null,"E-mail:",-1))),g=n((()=>(0,a._)("dt",null,"Registered:",-1))),_=n((()=>(0,a._)("h2",null,"Change password",-1))),P={key:0,class:"error",id:"error"},v=n((()=>(0,a._)("label",null,"Old password: ",-1))),f=n((()=>(0,a._)("label",null,"New password: ",-1))),I=n((()=>(0,a._)("label",null,"Repeat new password: ",-1))),y=n((()=>(0,a._)("input",{type:"submit",value:"Update password"},null,-1))),b=n((()=>(0,a._)("br",null,null,-1))),M=n((()=>(0,a._)("hr",null,null,-1))),E=n((()=>(0,a._)("h2",null,"My vibbz",-1)));function C(e,s,n,C,k,S){const U=(0,a.up)("Header"),x=(0,a.up)("PostLayout"),D=(0,a.up)("Message");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(U),d,(0,a._)("div",i,[(0,a._)("h1",null,"Hey, "+(0,o.zw)(k.username)+"!",1),(0,a._)("button",{onClick:s[0]||(s[0]=e=>S.editUser())},[(0,a._)("img",{id:"btnImgOne",src:t(2715)(`./${k.settingsIconImg}.png`)},null,8,u)])]),(0,a._)("section",p,[(0,a._)("div",h,[m,(0,a._)("dl",null,[w,(0,a._)("dd",null,(0,o.zw)(k.username),1),c,(0,a._)("dd",null,(0,o.zw)(k.email),1),g,(0,a._)("dd",null,(0,o.zw)(k.timestamp.slice(0,10)),1)])]),(0,a._)("div",null,[_,k.errorMessage?((0,a.wg)(),(0,a.iD)("div",P,[(0,a._)("p",null,(0,o.zw)(k.errorMessage),1)])):(0,a.kq)("",!0),(0,a._)("form",{onSubmit:s[4]||(s[4]=(0,r.iM)((e=>S.updatePassword()),["prevent"]))},[v,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=e=>k.oldPassword=e)},null,512),[[r.nr,k.oldPassword]]),f,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=e=>k.newPassword=e)},null,512),[[r.nr,k.newPassword]]),I,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":s[3]||(s[3]=e=>k.repeatPassword=e)},null,512),[[r.nr,k.repeatPassword]]),y],32),b,M])]),(0,a._)("section",null,[E,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.postsArr,(e=>((0,a.wg)(),(0,a.j4)(x,{key:e,class:"deleteBtnStyle",postID:e._id,textEl:e.text,usernameEl:e.username,emotionEl:e.emotion,hashtagsEl:e.hashtags,timestampEL:e.timestamp,showDeleteBtn:!0},null,8,["postID","textEl","usernameEl","emotionEl","hashtagsEl","timestampEL"])))),128))]),(0,a.Wm)(D,{theMessage:k.resultMessage,color:k.messageColor,reveal:k.revealStatus},null,8,["theMessage","color","reveal"])])}var k=t(7471),S=t(65),U=t(8810),x=t(6601),D={name:"Profile",components:{Header:k.Z,Footer:S.Z,PostLayout:x.Z,Message:U.Z},data(){return{username:"",email:"",timestamp:"",postsArr:{},oldPassword:"",newPassword:"",repeatPassword:"",resultMessage:"",messageColor:"",revealStatus:"none",errorColor:"#f36a6a",settingsIconImg:"iconSettings",errorMessage:""}},methods:{getUserInfo(){const e=sessionStorage.getItem("userID");fetch(`https://radiant-brushlands-91826.herokuapp.com/user/${e}`,{method:"GET"}).then((e=>{e.json().then((e=>{this.username=e.username,this.email=e.email,this.timestamp=e.timestamp}))})),fetch(`https://radiant-brushlands-91826.herokuapp.com/posts/${e}`,{method:"GET"}).then((e=>{e.json().then((e=>{this.postsArr=e}))}))},getImgUrl(e){var s=t(9861);return s("./"+e+".png")},editUser(){var e=document.getElementById("passwordBox");e.classList.contains("hide")?(this.settingsIconImg="iconClose",e.classList.remove("hide")):(this.settingsIconImg="iconSettings",e.classList.add("hide")),this.oldPassword="",this.newPassword="",this.repeatPassword=""},updatePassword(){const e=sessionStorage.getItem("userID");if(this.newPassword===this.repeatPassword){const s={oldPassword:this.oldPassword,newPassword:this.newPassword};fetch(`https://radiant-brushlands-91826.herokuapp.com/user/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((e=>{e.json().then((s=>{if(e.ok){this.settingsIconImg="iconSettings",this.resultMessage="Password is updated",this.messageColor="#c6ddc4",this.revealStatus="block",setTimeout((()=>{this.resultMessage="",this.messageColor="white",this.revealStatus="none"}),3e3);var t=document.getElementById("passwordBox");t.classList.toggle("hide")}else this.errorMessage=s.message}))}))}else this.errorMessage="New password dont match"}},beforeMount(){this.getUserInfo()}},B=t(89);const L=(0,B.Z)(D,[["render",C],["__scopeId","data-v-4a32af84"]]);var z=L}}]);
//# sourceMappingURL=Profile.b11c755b.js.map